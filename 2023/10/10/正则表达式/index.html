<!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0,viewport-fit=cover"><title>正则表达式 | Ruoy's Blog</title><meta name="author" content="Ruoy"><meta name="copyright" content="Ruoy"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="ffffff"><meta name="description" content="形式化定义 该部分参考 [^1] 正则表达式的概念源于形式语言和自动机理论。先介绍一些一些相关的基本概念，符号规定如下：    符号 含义 举例     Σ\SigmaΣ 字母表，一个非空有穷的字符集 Σ&#x3D;{0,1}\Sigma&#x3D;\{0,1\}Σ&#x3D;{0,1}   www 字符串，字母表中符号的有穷序列 w&#x3D;01101w&#x3D;01101w&#x3D;01101   LLL 语言，字符串的集合     不想打公式了">
<meta property="og:type" content="article">
<meta property="og:title" content="正则表达式">
<meta property="og:url" content="https://stayfish.github.io/blog/2023/10/10/%E6%AD%A3%E5%88%99%E8%A1%A8%E8%BE%BE%E5%BC%8F/index.html">
<meta property="og:site_name" content="Ruoy&#39;s Blog">
<meta property="og:description" content="形式化定义 该部分参考 [^1] 正则表达式的概念源于形式语言和自动机理论。先介绍一些一些相关的基本概念，符号规定如下：    符号 含义 举例     Σ\SigmaΣ 字母表，一个非空有穷的字符集 Σ&#x3D;{0,1}\Sigma&#x3D;\{0,1\}Σ&#x3D;{0,1}   www 字符串，字母表中符号的有穷序列 w&#x3D;01101w&#x3D;01101w&#x3D;01101   LLL 语言，字符串的集合     不想打公式了">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://stayfish.github.io/blog/2023/10/10/%E6%AD%A3%E5%88%99%E8%A1%A8%E8%BE%BE%E5%BC%8F/reg.svg">
<meta property="article:published_time" content="2023-10-09T19:06:00.998Z">
<meta property="article:modified_time" content="2023-10-23T10:31:35.399Z">
<meta property="article:author" content="Ruoy">
<meta property="article:tag" content="python">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://stayfish.github.io/blog/2023/10/10/%E6%AD%A3%E5%88%99%E8%A1%A8%E8%BE%BE%E5%BC%8F/reg.svg"><link rel="shortcut icon" href="/blog/img/favicon.png"><link rel="canonical" href="https://stayfish.github.io/blog/2023/10/10/%E6%AD%A3%E5%88%99%E8%A1%A8%E8%BE%BE%E5%BC%8F/index.html"><link rel="preconnect" href="//cdn.jsdelivr.net"/><link rel="preconnect" href="//busuanzi.ibruce.info"/><link rel="stylesheet" href="/blog/css/index.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free/css/all.min.css" media="print" onload="this.media='all'"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/ui/dist/fancybox/fancybox.min.css" media="print" onload="this.media='all'"><script>const GLOBAL_CONFIG = {
  root: '/blog/',
  algolia: undefined,
  localSearch: {"path":"/blog/search.xml","preload":false,"top_n_per_article":1,"unescape":false,"languages":{"hits_empty":"找不到您查询的内容：${query}","hits_stats":"共找到 ${hits} 篇文章"}},
  translate: undefined,
  noticeOutdate: undefined,
  highlight: {"plugin":"prismjs","highlightCopy":true,"highlightLang":true,"highlightHeightLimit":false},
  copy: {
    success: '复制成功',
    error: '复制错误',
    noSupport: '浏览器不支持'
  },
  relativeDate: {
    homepage: true,
    post: false
  },
  runtime: '',
  dateSuffix: {
    just: '刚刚',
    min: '分钟前',
    hour: '小时前',
    day: '天前',
    month: '个月前'
  },
  copyright: undefined,
  lightbox: 'fancybox',
  Snackbar: undefined,
  source: {
    justifiedGallery: {
      js: 'https://cdn.jsdelivr.net/npm/flickr-justified-gallery/dist/fjGallery.min.js',
      css: 'https://cdn.jsdelivr.net/npm/flickr-justified-gallery/dist/fjGallery.min.css'
    }
  },
  isPhotoFigcaption: true,
  islazyload: false,
  isAnchor: false,
  percent: {
    toc: true,
    rightside: false,
  },
  autoDarkmode: false
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = {
  title: '正则表达式',
  isPost: true,
  isHome: false,
  isHighlightShrink: false,
  isToc: true,
  postUpdate: '2023-10-23 18:31:35'
}</script><noscript><style type="text/css">
  #nav {
    opacity: 1
  }
  .justified-gallery img {
    opacity: 1
  }

  #recent-posts time,
  #post-meta time {
    display: inline !important
  }
</style></noscript><script>(win=>{
    win.saveToLocal = {
      set: function setWithExpiry(key, value, ttl) {
        if (ttl === 0) return
        const now = new Date()
        const expiryDay = ttl * 86400000
        const item = {
          value: value,
          expiry: now.getTime() + expiryDay,
        }
        localStorage.setItem(key, JSON.stringify(item))
      },

      get: function getWithExpiry(key) {
        const itemStr = localStorage.getItem(key)

        if (!itemStr) {
          return undefined
        }
        const item = JSON.parse(itemStr)
        const now = new Date()

        if (now.getTime() > item.expiry) {
          localStorage.removeItem(key)
          return undefined
        }
        return item.value
      }
    }
  
    win.getScript = url => new Promise((resolve, reject) => {
      const script = document.createElement('script')
      script.src = url
      script.async = true
      script.onerror = reject
      script.onload = script.onreadystatechange = function() {
        const loadState = this.readyState
        if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
        script.onload = script.onreadystatechange = null
        resolve()
      }
      document.head.appendChild(script)
    })
  
    win.getCSS = (url,id = false) => new Promise((resolve, reject) => {
      const link = document.createElement('link')
      link.rel = 'stylesheet'
      link.href = url
      if (id) link.id = id
      link.onerror = reject
      link.onload = link.onreadystatechange = function() {
        const loadState = this.readyState
        if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
        link.onload = link.onreadystatechange = null
        resolve()
      }
      document.head.appendChild(link)
    })
  
      win.activateDarkMode = function () {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#0d0d0d')
        }
      }
      win.activateLightMode = function () {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', 'ffffff')
        }
      }
      const t = saveToLocal.get('theme')
    
          if (t === 'dark') activateDarkMode()
          else if (t === 'light') activateLightMode()
        
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        if (asideStatus === 'hide') {
          document.documentElement.classList.add('hide-aside')
        } else {
          document.documentElement.classList.remove('hide-aside')
        }
      }
    
    const detectApple = () => {
      if(/iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)){
        document.documentElement.classList.add('apple')
      }
    }
    detectApple()
    })(window)</script><meta name="generator" content="Hexo 6.3.0"><link rel="alternate" href="/blog/atom.xml" title="Ruoy's Blog" type="application/atom+xml">
</head><body><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="avatar-img is-center"><img src="/blog/img/avatar.jpg" onerror="onerror=null;src='/img/friend_404.gif'" alt="avatar"/></div><div class="sidebar-site-data site-data is-center"><a href="/blog/archives/"><div class="headline">文章</div><div class="length-num">23</div></a><a href="/blog/tags/"><div class="headline">标签</div><div class="length-num">11</div></a><a href="/blog/categories/"><div class="headline">分类</div><div class="length-num">7</div></a></div><hr class="custom-hr"/><div class="menus_items"><div class="menus_item"><a class="site-page" href="/blog/"><i class="fa-fw fas fa-home"></i><span> Home</span></a></div><div class="menus_item"><a class="site-page" href="/blog/archives/"><i class="fa-fw fas fa-archive"></i><span> Archives</span></a></div><div class="menus_item"><a class="site-page" href="/blog/tags/"><i class="fa-fw fas fa-tags"></i><span> Tags</span></a></div><div class="menus_item"><a class="site-page" href="/blog/categories/"><i class="fa-fw fas fa-folder-open"></i><span> Categories</span></a></div><div class="menus_item"><a class="site-page" href="/blog/link/"><i class="fa-fw fas fa-link"></i><span> Link</span></a></div><div class="menus_item"><a class="site-page" href="/blog/about/"><i class="fa-fw fas fa-heart"></i><span> About</span></a></div></div></div></div><div class="post" id="body-wrap"><header class="post-bg" id="page-header" style="background-image: url('/blog/2023/10/10/%E6%AD%A3%E5%88%99%E8%A1%A8%E8%BE%BE%E5%BC%8F/reg.svg')"><nav id="nav"><span id="blog-info"><a href="/blog/" title="Ruoy's Blog"><span class="site-name">Ruoy's Blog</span></a></span><div id="menus"><div id="search-button"><a class="site-page social-icon search" href="javascript:void(0);"><i class="fas fa-search fa-fw"></i><span> 搜索</span></a></div><div class="menus_items"><div class="menus_item"><a class="site-page" href="/blog/"><i class="fa-fw fas fa-home"></i><span> Home</span></a></div><div class="menus_item"><a class="site-page" href="/blog/archives/"><i class="fa-fw fas fa-archive"></i><span> Archives</span></a></div><div class="menus_item"><a class="site-page" href="/blog/tags/"><i class="fa-fw fas fa-tags"></i><span> Tags</span></a></div><div class="menus_item"><a class="site-page" href="/blog/categories/"><i class="fa-fw fas fa-folder-open"></i><span> Categories</span></a></div><div class="menus_item"><a class="site-page" href="/blog/link/"><i class="fa-fw fas fa-link"></i><span> Link</span></a></div><div class="menus_item"><a class="site-page" href="/blog/about/"><i class="fa-fw fas fa-heart"></i><span> About</span></a></div></div><div id="toggle-menu"><a class="site-page" href="javascript:void(0);"><i class="fas fa-bars fa-fw"></i></a></div></div></nav><div id="post-info"><h1 class="post-title">正则表达式</h1><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="far fa-calendar-alt fa-fw post-meta-icon"></i><span class="post-meta-label">发表于</span><time class="post-meta-date-created" datetime="2023-10-09T19:06:00.998Z" title="发表于 2023-10-10 03:06:00">2023-10-10</time><span class="post-meta-separator">|</span><i class="fas fa-history fa-fw post-meta-icon"></i><span class="post-meta-label">更新于</span><time class="post-meta-date-updated" datetime="2023-10-23T10:31:35.399Z" title="更新于 2023-10-23 18:31:35">2023-10-23</time></span></div><div class="meta-secondline"><span class="post-meta-separator">|</span><span class="post-meta-pv-cv" id="" data-flag-title="正则表达式"><i class="far fa-eye fa-fw post-meta-icon"></i><span class="post-meta-label">阅读量:</span><span id="busuanzi_value_page_pv"><i class="fa-solid fa-spinner fa-spin"></i></span></span></div></div></div></header><main class="layout" id="content-inner"><div id="post"><article class="post-content" id="article-container"><h2 id="形式化定义">形式化定义</h2>
<p>该部分参考 [^1]</p>
<p>正则表达式的概念源于形式语言和自动机理论。先介绍一些一些相关的基本概念，符号规定如下：</p>
<table>
<thead>
<tr>
<th>符号</th>
<th>含义</th>
<th>举例</th>
</tr>
</thead>
<tbody>
<tr>
<td><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi mathvariant="normal">Σ</mi></mrow><annotation encoding="application/x-tex">\Sigma</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord">Σ</span></span></span></span></td>
<td>字母表，一个非空有穷的字符集</td>
<td><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi mathvariant="normal">Σ</mi><mo>=</mo><mo stretchy="false">{</mo><mn>0</mn><mo separator="true">,</mo><mn>1</mn><mo stretchy="false">}</mo></mrow><annotation encoding="application/x-tex">\Sigma=\{0,1\}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord">Σ</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">{</span><span class="mord">0</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord">1</span><span class="mclose">}</span></span></span></span></td>
</tr>
<tr>
<td><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>w</mi></mrow><annotation encoding="application/x-tex">w</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4306em;"></span><span class="mord mathnormal" style="margin-right:0.02691em;">w</span></span></span></span></td>
<td>字符串，字母表中符号的有穷序列</td>
<td><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>w</mi><mo>=</mo><mn>01101</mn></mrow><annotation encoding="application/x-tex">w=01101</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4306em;"></span><span class="mord mathnormal" style="margin-right:0.02691em;">w</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">01101</span></span></span></span></td>
</tr>
<tr>
<td><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>L</mi></mrow><annotation encoding="application/x-tex">L</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal">L</span></span></span></span></td>
<td>语言，字符串的集合</td>
<td></td>
</tr>
</tbody>
</table>
<p>不想打公式了，以后有时间在补充 🕊 😢</p>
<h2 id="python-正则表达式">python 正则表达式</h2>
<p>python 中可以使用 <code>re</code> 模块来实现正则表达式的相关功能。本文会介绍 <code>re</code> 中的函数和标志。</p>
<p>在这之前首先介绍 python 中各种字符串的形式和正则表达式语法。</p>
<h3 id="python-字符串">python 字符串</h3>
<ol>
<li>
<p>最普通的字符串 <code>'abc', &quot;abc&quot;</code></p>
</li>
<li>
<p>格式化字符串:</p>
 <pre class="line-numbers language-python" data-language="python"><code class="language-python">name <span class="token operator">=</span> <span class="token string">'ikun'</span>
<span class="token comment"># 1: %</span>
s <span class="token operator">=</span> <span class="token string">'name is %s'</span> <span class="token operator">%</span><span class="token punctuation">(</span>name<span class="token punctuation">)</span>
<span class="token comment"># 2: format</span>
s <span class="token operator">=</span> <span class="token string">'name is &#123;name&#125;'</span><span class="token punctuation">.</span><span class="token builtin">format</span><span class="token punctuation">(</span>name<span class="token operator">=</span>name<span class="token punctuation">)</span>
<span class="token comment"># or</span>
s <span class="token operator">=</span> <span class="token string">'name is &#123;&#125;'</span><span class="token punctuation">.</span><span class="token builtin">format</span><span class="token punctuation">(</span>name<span class="token punctuation">)</span>
<span class="token comment"># 3: f-string</span>
s <span class="token operator">=</span> <span class="token string-interpolation"><span class="token string">f"name is </span><span class="token interpolation"><span class="token punctuation">&#123;</span>name<span class="token punctuation">.</span>replace<span class="token punctuation">(</span><span class="token string">'i'</span><span class="token punctuation">,</span> <span class="token string">''</span><span class="token punctuation">)</span><span class="token punctuation">&#125;</span></span><span class="token string">"</span></span>
<span class="token comment"># s: name is kun</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
</li>
</ol>
<p>这两种字符串中，对于特殊字符需要转义，比如最熟悉的换行符 <code>\n</code>，如果需要字符串输出 <code>\n</code>，那么需要 <code>s='\\n'</code>，这种写法可读性太差，即反斜杠灾难。其次是在格式化字符串中如果需要包含一对 <code>&#123;&#125;</code>， 则需要 <code>s='name is &#123;&#123;&#125;&#125;'</code>，这样的话字符串的内容就是 <code>name is &#123;&#125;</code></p>
<ol start="3">
<li>原始字符串<br>
原始字符串以 <code>r</code> 开头，这种字符串引号内的内容就是字符串的内容，“所见即所得”，不进行任何转义。比如 <code>s=r'a\nb</code>，那么输出字符串的内容就是 <code>a\nb</code></li>
</ol>
<h3 id="正则表达式语法">正则表达式语法</h3>
<p>首先需要描述字符串规则，我们称之为“模式”。可以在 <a href="regex101.com">regex101</a> 上在线测试正则语法</p>
<p>下面讨论一些常用的（以后用到新的再补充），完整版参考 [^2] 以及 [^3]</p>
<h4 id="表示一类字符">表示一类字符</h4>
<table>
<thead>
<tr>
<th>模式</th>
<th>规则</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>.</code></td>
<td>除换行符外的所有字符，指定 <code>DOTALL</code> 后匹配所有字符</td>
</tr>
<tr>
<td><code>\d</code></td>
<td>数字字符</td>
</tr>
<tr>
<td><code>\D</code></td>
<td>非数字字符</td>
</tr>
<tr>
<td><code>\w</code></td>
<td>数字字符或字母或下划线</td>
</tr>
<tr>
<td><code>\W</code></td>
<td>除了 <code>\w</code> 的字符</td>
</tr>
<tr>
<td><code>\s</code></td>
<td>匹配任何空白字符，等价于字符类 <code>[ \t\n\r\f\v]</code></td>
</tr>
<tr>
<td><code>\S</code></td>
<td>匹配任何非空白字符，等价于字符类 <code>[^ \t\n\r\f\v]</code></td>
</tr>
</tbody>
</table>
<p><code>DOTALL</code> 相关信息可以参考 <a href="###%E6%A0%87%E5%BF%97">标志</a></p>
<h4 id="集合运算">集合运算</h4>
<table>
<thead>
<tr>
<th>模式</th>
<th>规则</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>[]</code></td>
<td>字符集合，匹配括号内的所有可能字符，如 <code>[abc],[0-9A-Z]</code>, 或除了括号里的都匹配，比如 <code>[^123]</code></td>
</tr>
<tr>
<td><code>A|B</code></td>
<td>匹配正则 A 或 B，从左到右匹配，一旦成功就不再继续匹配</td>
</tr>
</tbody>
</table>
<p><code>[]</code> 的使用中有一个需要注意的点，re 的文档如是说：</p>
<blockquote>
<p>特殊字符在集合中会失去其特殊意义。比如 [(+<em>)] 只会匹配这几个字面字符之一 ‘(’, ‘+’, '</em>', or ‘)’<br>
元字符 (除了 ) 在字符类中是不起作用的。</p>
</blockquote>
<h4 id="分组">分组</h4>
<table>
<thead>
<tr>
<th>模式</th>
<th>规则</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>()</code></td>
<td>分组，可用来捕获字符串中感兴趣的部分</td>
</tr>
</tbody>
</table>
<p>分组是有编号的，比如对于模式 <code>(a(b)c)d</code>：</p>
<ol>
<li>首先，组 0 一定存在，对应整个匹配结果</li>
<li>其次，组按照从左到右的顺序编号</li>
<li>可以同时传递多个组号</li>
<li>groups 返回一个元组，从 1 到最后一个组</li>
<li>当知道分组的编号 n 后，可以在模式中引用，引用方式为 <code>\n</code></li>
</ol>
<pre class="line-numbers language-python" data-language="python"><code class="language-python">p <span class="token operator">=</span> re<span class="token punctuation">.</span><span class="token builtin">compile</span><span class="token punctuation">(</span><span class="token string">'(a(b)c)d'</span><span class="token punctuation">)</span>
m <span class="token operator">=</span> p<span class="token punctuation">.</span><span class="token keyword">match</span><span class="token punctuation">(</span><span class="token string">'abcd'</span><span class="token punctuation">)</span>
m<span class="token punctuation">.</span>group<span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span>
<span class="token comment"># 'abcd'</span>
m<span class="token punctuation">.</span>group<span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span>
<span class="token comment"># abc</span>
m<span class="token punctuation">.</span>group<span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span>
<span class="token comment"># b</span>
m<span class="token punctuation">.</span>group<span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">)</span>
<span class="token comment"># ('b', 'abc', 'b')</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>括号在我们的传统的理解中，往往表示的是一种改变运算优先级的方式，这与正则中括号用来捕捉值的用途不同。为了让括号更“纯粹”，即只表示正则的一部分，可以使用非捕获组的语法，即 <code>(?:...)</code></p>
<p>目前为止，分组的一个问题是，很难去跟踪组号，因此给组命名是一种容易想到的助记的方式，语法为 <code>(?P&lt;name&gt;...)</code>。有了命名后，在group 方法中就可以直接使用分组名了；同样的，引用也可以用分组名的方式，应写作 <code>(?P=name)</code></p>
<p>例如：</p>
<pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token keyword">import</span> re

pattern <span class="token operator">=</span> <span class="token string">r"(\w+) \1"</span>
<span class="token comment"># pattern = r"(?P&lt;word>\w+) (?P=word)"</span>
s <span class="token operator">=</span> <span class="token string">"cat cat dog cat dog dog dog"</span>
<span class="token keyword">print</span><span class="token punctuation">(</span>re<span class="token punctuation">.</span>findall<span class="token punctuation">(</span>pattern<span class="token punctuation">,</span> s<span class="token punctuation">)</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>两种 <code>pattern</code> 下的输出均为 <code>['cat', 'dog']</code></p>
<p>此外，介绍分组中的一个坑，如下：</p>
<pre class="line-numbers language-python" data-language="python"><code class="language-python">m <span class="token operator">=</span> re<span class="token punctuation">.</span><span class="token keyword">match</span><span class="token punctuation">(</span><span class="token string">"([abc])+"</span><span class="token punctuation">,</span> <span class="token string">"abc"</span><span class="token punctuation">)</span>
g <span class="token operator">=</span> m<span class="token punctuation">.</span>groups<span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token keyword">print</span><span class="token punctuation">(</span>g<span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre>
<p>输出结果只有 c，问题的解释可以参考 [^4]，以及 [^5] 中的解释：</p>
<blockquote>
<p>Repetition and Backreferences<br>
As I mentioned in the above inside look, the regex engine does not permanently substitute backreferences in the regular expression. It will use the last match saved into the backreference each time it needs to be used. If a new match is found by capturing parentheses, the previously saved match is overwritten. There is a clear difference between ([abc]+) and ([abc])+. Though both successfully match cab, the first regex will put cab into the first backreference, while the second regex will only store b. That is because in the second regex, the plus caused the pair of parentheses to repeat three times. The first time, c was stored. The second time, a, and the third time b. Each time, the previous value was overwritten, so b remains.</p>
</blockquote>
<h4 id="数量限定">数量限定</h4>
<p>首先是三个特殊符号</p>
<table>
<thead>
<tr>
<th>模式</th>
<th>规则</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>&lt;reg&gt;*</code></td>
<td>对前面的正则进行 0 到任意多次匹配</td>
</tr>
<tr>
<td><code>&lt;reg&gt;+</code></td>
<td>对前面的正则进行 1 到任意多次匹配</td>
</tr>
<tr>
<td><code>&lt;reg&gt;?</code></td>
<td>对前面的正则进行 0 到 1 次匹配</td>
</tr>
</tbody>
</table>
<p>这三个都是对字符进行贪婪的匹配，即尽可能多的匹配。为了进行非贪婪的匹配（尽可能少的匹配），可以使用 <code>?</code> 的第二个语义，即限定为非贪婪的匹配模式。<code>*?, +?, ??</code> 都是非贪婪的匹配</p>
<p>然后是数量重复</p>
<table>
<thead>
<tr>
<th>模式</th>
<th>规则</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>&lt;reg&gt;&#123;m,n&#125;</code></td>
<td>对前面的正则匹配 m 到 n 个重复</td>
</tr>
</tbody>
</table>
<p>如果忽略 m，则可以写为 <code>&lt;reg&gt;&#123;n&#125;</code>；<br>
如果忽略 n，则写为 <code>&lt;reg&gt;&#123;m,&#125;</code>，此时上界为无限次</p>
<p>这种写法也是贪婪的匹配，即尽可能多的匹配，所以同样可以使用 <code>?</code> 来进行非贪婪的限定，即<code>&lt;reg&gt;&#123;m, n&#125;?</code></p>
<p>需要注意的是 <code>&#123;m,n&#125;</code> 这中间是不能有空格的</p>
<h3 id="标志">标志</h3>
<table>
<thead>
<tr>
<th>标志</th>
<th>含义</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>re.S</code> 或 <code>re.DOTALL</code></td>
<td>让 <code>.</code> 特殊字符匹配任何字符，包括换行符</td>
</tr>
</tbody>
</table>
<h3 id="模块函数">模块函数</h3>
<p>re 提供了不少的函数，下面从介绍一些常用的：</p>
<p><strong>re.search(pattern, string, flag=0)</strong><br>
找到字符串中第一个与模式匹配的子串，返回对应的 <code>re.Match</code>；没找到则返回 <code>None</code></p>
<p><strong>re.match(pattern, string, flag=0)</strong><br>
和 search 类似，但是只在字符串的开头匹配。</p>
<p>对于返回值 <code>re.Match</code> 可以参见后文 <a href="###re.Match">re.Match</a><br>
<code>search</code> 和 <code>match</code> 的区别可以从下面的测试中看出</p>
<pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token keyword">import</span> re
pattern <span class="token operator">=</span> <span class="token string">"&lt;(.*?)>(.*?)&lt;(.*?)>"</span>
s <span class="token operator">=</span> <span class="token string">"fasd&lt;a>first&lt;/a>fdag"</span>
matches <span class="token operator">=</span> re<span class="token punctuation">.</span>search<span class="token punctuation">(</span>pattern<span class="token punctuation">,</span> s<span class="token punctuation">)</span>
<span class="token keyword">print</span><span class="token punctuation">(</span>matches<span class="token punctuation">)</span>
matches <span class="token operator">=</span> re<span class="token punctuation">.</span><span class="token keyword">match</span><span class="token punctuation">(</span>pattern<span class="token punctuation">,</span> s<span class="token punctuation">)</span>
<span class="token keyword">print</span><span class="token punctuation">(</span>matches<span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>输出结果为：</p>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token operator">&lt;</span>re.Match object<span class="token punctuation">;</span> <span class="token assign-left variable">span</span><span class="token operator">=</span><span class="token punctuation">(</span><span class="token number">4</span>, <span class="token number">16</span><span class="token punctuation">)</span>, <span class="token assign-left variable">match</span><span class="token operator">=</span><span class="token string">'&lt;a>first&lt;/a>'</span><span class="token operator">></span>
None<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre>
<p><strong>re.findall(pattern, string, flags=0)</strong><br>
该函数返回 pattern 在 string 中所有的 <strong>非重叠</strong> 匹配，以列表的形式返回。</p>
<pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token keyword">import</span> re

patterns <span class="token operator">=</span> <span class="token string">r"\d*?"</span>
s <span class="token operator">=</span> <span class="token string">"1234000"</span>
matches <span class="token operator">=</span> re<span class="token punctuation">.</span>findall<span class="token punctuation">(</span>patterns<span class="token punctuation">,</span> s<span class="token punctuation">)</span>
<span class="token keyword">print</span><span class="token punctuation">(</span>matches<span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>输出结果为：</p>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token punctuation">[</span><span class="token string">''</span>, <span class="token string">'1'</span>, <span class="token string">''</span>, <span class="token string">'2'</span>, <span class="token string">''</span>, <span class="token string">'3'</span>, <span class="token string">''</span>, <span class="token string">'4'</span>, <span class="token string">''</span>, <span class="token string">'0'</span>, <span class="token string">''</span>, <span class="token string">'0'</span>, <span class="token string">''</span>, <span class="token string">'0'</span>, <span class="token string">''</span><span class="token punctuation">]</span> <span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
<ol>
<li>由于使用的是非贪婪的匹配，因此最开始应该匹配 0 次得到空字符；</li>
<li>然后由于 findall 函数是进行非重叠的匹配，因此下一次匹配不能再匹配 0 次（或者说，不能再以空字符打头） ，否则和 <code>matches[0]</code> 重叠了，因此匹配一次，得到 1;</li>
<li>然后还是为了不再重叠，匹配的开始位置要向后移，否则会重叠，后面以此类推…</li>
</ol>
<p>列表的形式和 <a href="####%E5%88%86%E7%BB%84">分组</a> 是有关系的。返回结果取决于模式中捕获组的数量。如果没有组，列表元素是与模式匹配的字符串。如果有且仅有一个组，列表元素是与匹配到的字符串的组的部分。如果有多个组，列表元素是一个元组，元组的每一个元素对应匹配到的字符串的一个组。非捕获组不影响结果。</p>
<pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token keyword">import</span> re
patterns <span class="token operator">=</span> <span class="token punctuation">[</span>
    <span class="token string">"&lt;.*?>.*?&lt;.*?>"</span><span class="token punctuation">,</span> 
    <span class="token string">"&lt;.*?>(.*?)&lt;.*?>"</span><span class="token punctuation">,</span>
    <span class="token string">"&lt;(.*?)>(.*?)&lt;(.*?)>"</span>
<span class="token punctuation">]</span>
s <span class="token operator">=</span> <span class="token string">"&lt;a>first&lt;/a>&lt;b>second&lt;c>"</span>
<span class="token keyword">for</span> pattern <span class="token keyword">in</span> patterns<span class="token punctuation">:</span>
    mathches <span class="token operator">=</span> re<span class="token punctuation">.</span>findall<span class="token punctuation">(</span>pattern<span class="token punctuation">,</span> s<span class="token punctuation">)</span>
    <span class="token keyword">print</span><span class="token punctuation">(</span>mathches<span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>输出结果为：</p>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token punctuation">[</span><span class="token string">'&lt;a>first&lt;/a>'</span>, <span class="token string">'&lt;b>second&lt;c>'</span><span class="token punctuation">]</span>
<span class="token punctuation">[</span><span class="token string">'first'</span>, <span class="token string">'second'</span><span class="token punctuation">]</span>
<span class="token punctuation">[</span><span class="token punctuation">(</span><span class="token string">'a'</span>, <span class="token string">'first'</span>, <span class="token string">'/a'</span><span class="token punctuation">)</span>, <span class="token punctuation">(</span><span class="token string">'b'</span>, <span class="token string">'second'</span>, <span class="token string">'c'</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre>
<p>这三行分别对应三种情况：</p>
<ol>
<li>没有分组，匹配到整个字符串；</li>
<li>一个分组，列表元素是模式()内对应的部分</li>
<li>多个分组，列表元素是元组，元组元素对应模式中的一个括号</li>
</ol>
<p><strong>re.sub(pattern, repl, string [, count=0])</strong><br>
该函数用 repl 非重叠的替换字符串中被匹配的子串，count 指定了最大的替换次数，默认为 0，代表全部替换。</p>
<p><strong>re.compile(pattern, flags=0)</strong><br>
该函数返回一个编译的正则对象，然后我们可以调用这个这个对象的 <code>Pattern.match(string), Pattern.search(string)</code> 等方法，这样做的好处是</p>
<p><strong>re.split(pattern, string, maxsplit, flag)</strong><br>
用法和普通的 <code>str.split</code> 类似，但是这里分隔符是按照模式进行匹配，如果模式中有用于捕获的括号，则组内的内容也会被包含在括号中</p>
<pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token keyword">import</span> re
pattern1 <span class="token operator">=</span> <span class="token string">'\s'</span>
pattern2 <span class="token operator">=</span> <span class="token string">'(\s)'</span>
s <span class="token operator">=</span> <span class="token string">'1 d\ttest'</span>
<span class="token keyword">print</span><span class="token punctuation">(</span>re<span class="token punctuation">.</span>split<span class="token punctuation">(</span>pattern1<span class="token punctuation">,</span> s<span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token keyword">print</span><span class="token punctuation">(</span>re<span class="token punctuation">.</span>split<span class="token punctuation">(</span>pattern2<span class="token punctuation">,</span> s<span class="token punctuation">)</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>输出为</p>
<pre class="line-numbers language-plain" data-language="plain"><div class="caption"><span>text</span></div><code class="language-plain">['1', 'd', 'test']
['1', ' ', 'd', '\t', 'test']<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre>
<h3 id="re-Match">re.Match</h3>
<p><code>re.Match</code> 是 <code>re.match</code> 和 <code>re.search</code> 的返回值类型，介绍几个常用的方法。</p>
<p>在 <a href="####%E5%88%86%E7%BB%84">分组</a> 中已经提到了 <code>group</code> 和 <code>groups</code> 方法，现在介绍三个和位置有关的方法，<code>start, end, span</code></p>
<p>从名字就能看出他们的含义，<code>start</code> 指的是匹配的开始的标号，<code>end</code> 指的是匹配结束的标号，这两个若未产生匹配则为 -1；而 <code>span</code> 则是一个二元组 <code>(m.start(group), end(group))</code></p>
<h3 id="进阶">进阶</h3>
<p>可以参考网上的博客，比如 [^6]</p>
<h2 id="References">References</h2>
<p>[^1]:计算理论导引 Sipser<br>
[^2]:<a target="_blank" rel="noopener" href="https://docs.python.org/zh-cn/3/library/re.html#regular-expression-syntax">正则表达式语法-python3.12.0文档</a><br>
[^3]:<a target="_blank" rel="noopener" href="https://docs.python.org/zh-cn/3/howto/regex.html#">正则表达式指南-python3.12.0文档</a><br>
[^4]:<a target="_blank" rel="noopener" href="https://stackoverflow.com/questions/24857005/why-does-a-repeated-capture-group-return-these-strings">Why Does a Repeated Capture Group Return these Strings?-Stack Overflow</a><br>
[^5]:<a target="_blank" rel="noopener" href="https://www.regular-expressions.info/backref.html">Regex Tutorial - Backreferences To Match The Same Text Again</a><br>
[^6]:<a target="_blank" rel="noopener" href="https://zq99299.github.io/note-book/regular/02/03.html">正则表达式入门</a></p>
</article><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta">文章作者: </span><span class="post-copyright-info"><a href="https://stayfish.github.io/blog">Ruoy</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta">文章链接: </span><span class="post-copyright-info"><a href="https://stayfish.github.io/blog/2023/10/10/%E6%AD%A3%E5%88%99%E8%A1%A8%E8%BE%BE%E5%BC%8F/">https://stayfish.github.io/blog/2023/10/10/%E6%AD%A3%E5%88%99%E8%A1%A8%E8%BE%BE%E5%BC%8F/</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta">版权声明: </span><span class="post-copyright-info">本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank">CC BY-NC-SA 4.0</a> 许可协议。转载请注明来自 <a href="https://stayfish.github.io/blog" target="_blank">Ruoy's Blog</a>！</span></div></div><div class="tag_share"><div class="post-meta__tag-list"><a class="post-meta__tags" href="/blog/tags/python/">python</a></div><div class="post_share"><div class="social-share" data-image="/blog/2023/10/10/%E6%AD%A3%E5%88%99%E8%A1%A8%E8%BE%BE%E5%BC%8F/reg.svg" data-sites="facebook,twitter,wechat,weibo,qq"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/butterfly-extsrc/sharejs/dist/css/share.min.css" media="print" onload="this.media='all'"><script src="https://cdn.jsdelivr.net/npm/butterfly-extsrc/sharejs/dist/js/social-share.min.js" defer></script></div></div><nav class="pagination-post" id="pagination"><div class="prev-post pull-left"><a href="/blog/2023/10/14/python-%E5%BC%82%E5%B8%B8%E5%A4%84%E7%90%86/" title="python-异常处理"><img class="cover" src="/blog/2023/10/14/python-%E5%BC%82%E5%B8%B8%E5%A4%84%E7%90%86/error.svg" onerror="onerror=null;src='/blog/img/404.jpg'" alt="cover of previous post"><div class="pagination-info"><div class="label">上一篇</div><div class="prev_info">python-异常处理</div></div></a></div><div class="next-post pull-right"><a href="/blog/2023/09/27/python-%E5%87%BD%E6%95%B0%E5%8F%82%E6%95%B0/" title="python-函数参数"><img class="cover" src="/blog/2023/09/27/python-%E5%87%BD%E6%95%B0%E5%8F%82%E6%95%B0/func.svg" onerror="onerror=null;src='/blog/img/404.jpg'" alt="cover of next post"><div class="pagination-info"><div class="label">下一篇</div><div class="next_info">python-函数参数</div></div></a></div></nav><div class="relatedPosts"><div class="headline"><i class="fas fa-thumbs-up fa-fw"></i><span>相关推荐</span></div><div class="relatedPosts-list"><div><a href="/blog/2023/09/11/30-days-of-pandas/" title="30-days-of-pandas"><img class="cover" src="/blog/2023/09/11/30-days-of-pandas/logo.png" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2023-09-11</div><div class="title">30-days-of-pandas</div></div></a></div><div><a href="/blog/2023/09/09/lambda%E8%A1%A8%E8%BE%BE%E5%BC%8F/" title="lambda表达式"><img class="cover" src="/blog/2023/09/09/lambda%E8%A1%A8%E8%BE%BE%E5%BC%8F/lambda.svg" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2023-09-09</div><div class="title">lambda表达式</div></div></a></div><div><a href="/blog/2023/10/24/python-%E5%86%85%E5%AD%98%E7%AE%A1%E7%90%86%E6%9C%BA%E5%88%B6/" title="python-内存管理机制"><img class="cover" src="/blog/2023/10/24/python-%E5%86%85%E5%AD%98%E7%AE%A1%E7%90%86%E6%9C%BA%E5%88%B6/mem.svg" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2023-10-24</div><div class="title">python-内存管理机制</div></div></a></div><div><a href="/blog/2023/09/27/python-%E5%87%BD%E6%95%B0%E5%8F%82%E6%95%B0/" title="python-函数参数"><img class="cover" src="/blog/2023/09/27/python-%E5%87%BD%E6%95%B0%E5%8F%82%E6%95%B0/func.svg" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2023-09-27</div><div class="title">python-函数参数</div></div></a></div><div><a href="/blog/2023/10/14/python-%E5%BC%82%E5%B8%B8%E5%A4%84%E7%90%86/" title="python-异常处理"><img class="cover" src="/blog/2023/10/14/python-%E5%BC%82%E5%B8%B8%E5%A4%84%E7%90%86/error.svg" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2023-10-14</div><div class="title">python-异常处理</div></div></a></div><div><a href="/blog/2023/09/27/python-%E6%89%93%E5%8C%85%E5%92%8C%E8%A7%A3%E5%8C%85/" title="python-打包和解包"><img class="cover" src="/blog/images/python.svg" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2023-09-27</div><div class="title">python-打包和解包</div></div></a></div></div></div><hr class="custom-hr"/><div id="post-comment"><div class="comment-head"><div class="comment-headline"><i class="fas fa-comments fa-fw"></i><span> 评论</span></div></div><div class="comment-wrap"><div><div id="gitalk-container"></div></div></div></div></div><div class="aside-content" id="aside-content"><div class="card-widget card-info"><div class="is-center"><div class="avatar-img"><img src="/blog/img/avatar.jpg" onerror="this.onerror=null;this.src='/blog/img/friend_404.gif'" alt="avatar"/></div><div class="author-info__name">Ruoy</div><div class="author-info__description">易心</div></div><div class="card-info-data site-data is-center"><a href="/blog/archives/"><div class="headline">文章</div><div class="length-num">23</div></a><a href="/blog/tags/"><div class="headline">标签</div><div class="length-num">11</div></a><a href="/blog/categories/"><div class="headline">分类</div><div class="length-num">7</div></a></div><a id="card-info-btn" target="_blank" rel="noopener" href="https://github.com/stayfish"><i class="fab fa-github"></i><span>Follow Me</span></a></div><div class="sticky_layout"><div class="card-widget" id="card-toc"><div class="item-headline"><i class="fas fa-stream"></i><span>目录</span><span class="toc-percentage"></span></div><div class="toc-content"><ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%BD%A2%E5%BC%8F%E5%8C%96%E5%AE%9A%E4%B9%89"><span class="toc-number">1.</span> <span class="toc-text">形式化定义</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#python-%E6%AD%A3%E5%88%99%E8%A1%A8%E8%BE%BE%E5%BC%8F"><span class="toc-number">2.</span> <span class="toc-text">python 正则表达式</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#python-%E5%AD%97%E7%AC%A6%E4%B8%B2"><span class="toc-number">2.1.</span> <span class="toc-text">python 字符串</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%AD%A3%E5%88%99%E8%A1%A8%E8%BE%BE%E5%BC%8F%E8%AF%AD%E6%B3%95"><span class="toc-number">2.2.</span> <span class="toc-text">正则表达式语法</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E8%A1%A8%E7%A4%BA%E4%B8%80%E7%B1%BB%E5%AD%97%E7%AC%A6"><span class="toc-number">2.2.1.</span> <span class="toc-text">表示一类字符</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E9%9B%86%E5%90%88%E8%BF%90%E7%AE%97"><span class="toc-number">2.2.2.</span> <span class="toc-text">集合运算</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%88%86%E7%BB%84"><span class="toc-number">2.2.3.</span> <span class="toc-text">分组</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%95%B0%E9%87%8F%E9%99%90%E5%AE%9A"><span class="toc-number">2.2.4.</span> <span class="toc-text">数量限定</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%A0%87%E5%BF%97"><span class="toc-number">2.3.</span> <span class="toc-text">标志</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%A8%A1%E5%9D%97%E5%87%BD%E6%95%B0"><span class="toc-number">2.4.</span> <span class="toc-text">模块函数</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#re-Match"><span class="toc-number">2.5.</span> <span class="toc-text">re.Match</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%BF%9B%E9%98%B6"><span class="toc-number">2.6.</span> <span class="toc-text">进阶</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#References"><span class="toc-number">3.</span> <span class="toc-text">References</span></a></li></ol></div></div></div></div></main><footer id="footer" style="background-image: url('/blog/2023/10/10/%E6%AD%A3%E5%88%99%E8%A1%A8%E8%BE%BE%E5%BC%8F/reg.svg')"><div id="footer-wrap"><div class="copyright">&copy;2023 By Ruoy</div><div class="framework-info"><span>框架 </span><a target="_blank" rel="noopener" href="https://hexo.io">Hexo</a><span class="footer-separator">|</span><span>主题 </span><a target="_blank" rel="noopener" href="https://github.com/jerryc127/hexo-theme-butterfly">Butterfly</a></div></div></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="阅读模式"><i class="fas fa-book-open"></i></button><button id="darkmode" type="button" title="浅色和深色模式转换"><i class="fas fa-adjust"></i></button><button id="hide-aside-btn" type="button" title="单栏和双栏切换"><i class="fas fa-arrows-alt-h"></i></button></div><div id="rightside-config-show"><button id="rightside_config" type="button" title="设置"><i class="fas fa-cog fa-spin"></i></button><button class="close" id="mobile-toc-button" type="button" title="目录"><i class="fas fa-list-ul"></i></button><a id="to_comment" href="#post-comment" title="直达评论"><i class="fas fa-comments"></i></a><button id="go-up" type="button" title="回到顶部"><span class="scroll-percent"></span><i class="fas fa-arrow-up"></i></button></div></div><div><script src="/blog/js/utils.js"></script><script src="/blog/js/main.js"></script><script src="https://cdn.jsdelivr.net/npm/@fancyapps/ui/dist/fancybox/fancybox.umd.min.js"></script><div class="js-pjax"><link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/npm/katex/dist/katex.min.css"><script src="https://cdn.jsdelivr.net/npm/katex/dist/contrib/copy-tex.min.js"></script><script>(() => {
  document.querySelectorAll('#article-container span.katex-display').forEach(item => {
    btf.wrap(item, 'div', { class: 'katex-wrap'})
  })
})()</script><script>function loadGitalk () {
  function initGitalk () {
    var gitalk = new Gitalk(Object.assign({
      clientID: '258cd02767c81afddaa6',
      clientSecret: '45054ac870ac6699a79f8643b1beea670fd3f8ab',
      repo: 'blog',
      owner: 'stayfish',
      admin: ['stayfish'],
      id: '123038416e9f914c76c94340304ec38a',
      updateCountCallback: commentCount
    },null))

    gitalk.render('gitalk-container')
  }

  if (typeof Gitalk === 'function') initGitalk()
  else {
    getCSS('https://cdn.jsdelivr.net/npm/gitalk/dist/gitalk.min.css')
    getScript('https://cdn.jsdelivr.net/npm/gitalk/dist/gitalk.min.js').then(initGitalk)
  }
}

function commentCount(n){
  let isCommentCount = document.querySelector('#post-meta .gitalk-comment-count')
  if (isCommentCount) {
    isCommentCount.textContent= n
  }
}

if ('Gitalk' === 'Gitalk' || !false) {
  if (false) btf.loadComment(document.getElementById('gitalk-container'), loadGitalk)
  else loadGitalk()
} else {
  function loadOtherComment () {
    loadGitalk()
  }
}</script></div><script async data-pjax src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><div id="local-search"><div class="search-dialog"><nav class="search-nav"><span class="search-dialog-title">搜索</span><span id="loading-status"></span><button class="search-close-button"><i class="fas fa-times"></i></button></nav><div class="is-center" id="loading-database"><i class="fas fa-spinner fa-pulse"></i><span>  数据库加载中</span></div><div class="search-wrap"><div id="local-search-input"><div class="local-search-box"><input class="local-search-box--input" placeholder="搜索文章" type="text"/></div></div><hr/><div class="no-result" id="local-search-results"></div><div id="local-search-stats-wrap"></div></div></div><div id="search-mask"></div><script src="/blog/js/search/local-search.js"></script></div></div></body></html>